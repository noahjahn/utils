FROM alpine

RUN apk add openssh

ENV DESTINATION_USERNAME=
ENV DESTINATION_HOST=
ENV LOCAL_PORT_MAP=
ENV REMOTE_HOST=
ENV REMOTE_PORT=

CMD ["ssh", "-o StrictHostKeyChecking=no", "-g", "-N", "-i ./private-key", "-L 0.0.0.0:${LOCAL_PORT_MAP}:${REMOTE_HOST}:${REMOTE_PORT}", "${DESTINATION_USERNAME}@${DESTINATION_HOST}"]
